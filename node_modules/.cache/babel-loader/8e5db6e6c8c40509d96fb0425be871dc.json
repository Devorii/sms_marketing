{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/devorii/Desktop/sms_beta/src/pages/Message.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from \"react\";\nimport Footer from \"../components/Footer\";\nimport Cookies from \"js-cookie\";\nimport CreateMsgbutton from \"../components/Createmsgbutton\";\nimport DeleteMessageComponent from \"../components/DeleteMessageComponent\";\nimport UpdateMessages from \"../components/UpdateMessages\";\nimport { ContactContext } from \"../context/ContactsCtxt\";\nimport Delete from \"../assets/messageIcons/delete.svg\";\nimport Update from \"../assets/messageIcons/update.svg\";\nimport Send from \"../assets/messageIcons/send.svg\";\n\nconst Message = props => {\n  _s();\n\n  const {\n    contacts\n  } = useContext(ContactContext);\n  const [messageItem, setMessageItem] = useState({\n    items: null,\n    loaded: false\n  });\n  const [updateStyle, setUpdateStyle] = useState({\n    width: \"100%\",\n    display: \"flex\",\n    justifyContent: \"center\"\n  });\n  const [updateStyleNone, setUpdateStyleNone] = useState({\n    width: \"100%\",\n    display: \"none\",\n    justifyContent: \"center\"\n  });\n  const [selectID, setSelectID] = useState({\n    id: 0,\n    loaded: false\n  });\n  const [message, setMessage] = useState({\n    title: \"\",\n    message: \"\",\n    url: \"\",\n    loaded: false\n  });\n  const [deleteOnClick, setDeleteOnClick] = useState('closeDelete');\n  const [closeBtn, SetCloseBtn] = useState({\n    top: \"0\",\n    right: \"0\",\n    marginTop: '20px',\n    marginRight: '20px',\n    position: \"fixed\",\n    backgroundColor: \"red\",\n    width: '29px',\n    height: '29px',\n    border: \"none\",\n    borderRadius: '100px',\n    padding: \"5px\",\n    fontSize: \"15px\",\n    color: \"white\"\n  });\n  const [showUpdate, setShowUpdate] = useState(false);\n\n  const exOnClick = () => setShowUpdate(!showUpdate);\n\n  const updateOnClick = () => setShowUpdate(true);\n\n  useEffect(() => {\n    var storedTitle;\n    fetch(\"http://localhost:5000/onload-messages\", {\n      method: \"GET\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"x-access-token\": Cookies.get(\"token\")\n      }\n    }).then(resp => resp.json()).then(items => {\n      setMessageItem({\n        items: Object.values(items),\n        loaded: true\n      }); // Call another fetch to return an obj\n\n      setSelectID({\n        id: Object.values(items)[0].id,\n        loaded: true\n      });\n      storedTitle = Object.values(items)[0].title;\n      return fetch(`http://localhost:5000/template/${Object.values(items)[0].id}`, {\n        method: \"GET\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"x-access-token\": Cookies.get(\"token\")\n        }\n      });\n    }).then(response => response.json()).then(resp_items => {\n      setMessage({\n        title: storedTitle,\n        message: Object.values(resp_items)[0].Message,\n        url: Object.values(resp_items)[0].url,\n        loaded: true\n      });\n    });\n  }, []); // SELECTED TEMPLATES\n\n  const selectedTemplate = e => {\n    var index = e.target.selectedIndex;\n    const selection_id = e.target.value;\n    setSelectID({\n      id: selection_id,\n      loaded: true\n    });\n    fetch(`http://localhost:5000/template/${selection_id}`, {\n      method: \"GET\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"x-access-token\": Cookies.get(\"token\")\n      }\n    }).then(response => response.json()).then(resp_items => {\n      console.log(`resp items: ${resp_items} `);\n      setMessage({\n        title: e.target[index].text,\n        message: Object.values(resp_items)[0].Message,\n        url: Object.values(resp_items)[0].url,\n        loaded: true\n      });\n    });\n  }; // Deleting selection\n\n\n  const deleteSelected = () => {\n    setDeleteOnClick('openDelete'); // fetch(`http://localhost:5000/delete-messages/${selection_id}`,{\n  };\n\n  const updateParentState = childProps => {\n    setDeleteOnClick(childProps);\n  }; //Sending messages\n\n\n  const sendingmessages = () => {\n    const send_contacts = [];\n    const send_names = [];\n    const send_img = `http://localhost:5000/images/${selectID.id}`;\n    const send_msg = message.message;\n    const send_temp_name = message.title;\n    const send_url = message.url;\n    const listOfContacts = contacts[0].contacts.items;\n    listOfContacts.map(obj => {\n      send_contacts.push(obj.number);\n      send_names.push(obj.name);\n    });\n    console.log(send_contacts);\n    fetch(`http://localhost:5000/send-messages`, {\n      method: 'POST',\n      mode: 'cors',\n      body: JSON.stringify({\n        api_numbers: send_contacts,\n        api_names: send_names,\n        api_msg: send_msg,\n        api_url: send_url\n      }),\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"x-access-token\": Cookies.get(\"token\")\n      }\n    });\n  }; //  Render load conditions\n\n\n  var {\n    loaded\n  } = messageItem;\n\n  if (!loaded) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 5\n      }, this)\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"app-bg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"pagetitle pageDesc\",\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Template\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 40\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"page_greeting messageIconsParentContainer\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"pageDesc\",\n            children: \"View Templates\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 4\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              style: {\n                width: '18px',\n                height: '18px',\n                marginLeft: '40px',\n                marginTop: '10px'\n              },\n              onClick: deleteSelected,\n              src: Delete,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 5\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              style: {\n                width: '18px',\n                height: '18px',\n                marginLeft: '10px',\n                marginTop: '10px'\n              },\n              onClick: updateOnClick,\n              src: Update,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 5\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              style: {\n                width: '18px',\n                height: '18px',\n                marginLeft: '10px',\n                marginTop: '10px'\n              },\n              onClick: sendingmessages,\n              src: Send,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 5\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 4\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"selectId\",\n          onChange: selectedTemplate,\n          children: messageItem.items.map(obj => /*#__PURE__*/_jsxDEV(\"option\", {\n            style: {\n              color: \"#6B6B6B\",\n              display: \"flex\",\n              flexDirection: \"column\"\n            },\n            name: obj.title,\n            value: obj.id,\n            children: obj.title\n          }, obj.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 8\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cardHolder\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message_card\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image_holder\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"displayImg\",\n                src: selectID.loaded ? `http://localhost:5000/images/${selectID.id}` : `http://localhost:5000/images/4`,\n                alt: \"content_image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  textAlign: \"left\",\n                  paddingLeft: \"20px\",\n                  paddingRight: \"20px\",\n                  marginBottom: \"2px\"\n                },\n                children: message.loaded ? message.message : \"No message found\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  textAlign: \"left\",\n                  paddingLeft: \"20px\",\n                  paddingRight: \"20px\",\n                  color: \"blue\",\n                  textDecoration: \"underline\",\n                  marginTop: \"1px\"\n                },\n                children: message.loaded ? message.url : \"No url found\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(DeleteMessageComponent, {\n            selected: selectID.id,\n            cond: deleteOnClick,\n            onNameChange: updateParentState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: showUpdate ? updateStyle : updateStyleNone,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: exOnClick,\n            style: closeBtn,\n            children: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(UpdateMessages, {\n            id: selectID.id,\n            title: message.title,\n            message: message.message,\n            url: message.url\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"msgBtn\",\n          children: /*#__PURE__*/_jsxDEV(CreateMsgbutton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 5\n      }, this)\n    }, void 0, false);\n  }\n};\n\n_s(Message, \"/wr3vo5lU0DtL9zPSc63BbddLBI=\");\n\n_c = Message;\nexport default Message;\n\nvar _c;\n\n$RefreshReg$(_c, \"Message\");","map":{"version":3,"sources":["/Users/devorii/Desktop/sms_beta/src/pages/Message.js"],"names":["React","useEffect","useState","useContext","Footer","Cookies","CreateMsgbutton","DeleteMessageComponent","UpdateMessages","ContactContext","Message","props","contacts","messageItem","setMessageItem","items","loaded","updateStyle","setUpdateStyle","width","display","justifyContent","updateStyleNone","setUpdateStyleNone","selectID","setSelectID","id","message","setMessage","title","url","deleteOnClick","setDeleteOnClick","closeBtn","SetCloseBtn","top","right","marginTop","marginRight","position","backgroundColor","height","border","borderRadius","padding","fontSize","color","showUpdate","setShowUpdate","exOnClick","updateOnClick","storedTitle","fetch","method","mode","headers","get","then","resp","json","Object","values","response","resp_items","selectedTemplate","e","index","target","selectedIndex","selection_id","value","console","log","text","deleteSelected","updateParentState","childProps","sendingmessages","send_contacts","send_names","send_img","send_msg","send_temp_name","send_url","listOfContacts","map","obj","push","number","name","body","JSON","stringify","api_numbers","api_names","api_msg","api_url","marginLeft","Delete","Update","Send","flexDirection","textAlign","paddingLeft","paddingRight","marginBottom","textDecoration"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport Footer from \"../components/Footer\";\nimport Cookies from \"js-cookie\";\nimport CreateMsgbutton from \"../components/Createmsgbutton\";\nimport DeleteMessageComponent from \"../components/DeleteMessageComponent\";\nimport UpdateMessages from \"../components/UpdateMessages\";\nimport { ContactContext } from \"../context/ContactsCtxt\"\nimport Delete from '../assets/messageIcons/delete.svg'\nimport Update from '../assets/messageIcons/update.svg'\nimport Send from '../assets/messageIcons/send.svg'\n\n\nconst Message = (props) => {\n\tconst {contacts} = useContext(ContactContext)\n\n\n\tconst [messageItem, setMessageItem] = useState({\n\t\titems: null,\n\t\tloaded: false,\n\t});\n\tconst [updateStyle, setUpdateStyle] = useState({\n\t\twidth: \"100%\",\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t});\n\tconst [updateStyleNone, setUpdateStyleNone] = useState({\n\t\twidth: \"100%\",\n\t\tdisplay: \"none\",\n\t\tjustifyContent: \"center\",\n\t});\n\tconst [selectID, setSelectID] = useState({\n\t\tid: 0,\n\t\tloaded: false,\n\t});\n\tconst [message, setMessage] = useState({\n\t\ttitle: \"\",\n\t\tmessage: \"\",\n\t\turl: \"\",\n\t\tloaded: false,\n\t});\n\tconst [deleteOnClick, setDeleteOnClick] = useState('closeDelete');\n\n\tconst [closeBtn, SetCloseBtn] = useState({\n\t\ttop: \"0\",\n\t\tright: \"0\",\n\t\tmarginTop: '20px',\n\t\tmarginRight: '20px',\n\t\tposition: \"fixed\",\n\t\tbackgroundColor: \"red\",\n\t\twidth: '29px',\n\t\theight: '29px',\n\t\tborder: \"none\",\n\t\tborderRadius: '100px',\n\t\tpadding: \"5px\",\n\t\tfontSize: \"15px\",\n\t\tcolor: \"white\",\n\t});\n\tconst [showUpdate, setShowUpdate] = useState(false);\n\n\tconst exOnClick = () => setShowUpdate(!showUpdate);\n\tconst updateOnClick = () => setShowUpdate(true);\n\n\tuseEffect(() => {\n\t\tvar storedTitle;\n\n\t\tfetch(\"http://localhost:5000/onload-messages\", {\n\t\t\tmethod: \"GET\",\n\t\t\tmode: \"cors\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\"x-access-token\": Cookies.get(\"token\"),\n\t\t\t},\n\t\t})\n\t\t\t.then((resp) => resp.json())\n\t\t\t.then((items) => {\n\t\t\t\tsetMessageItem({ items: Object.values(items), loaded: true });\n\t\t\t\t// Call another fetch to return an obj\n\t\t\t\tsetSelectID({ id: Object.values(items)[0].id, loaded: true });\n\t\t\t\tstoredTitle = Object.values(items)[0].title;\n\n\t\t\t\treturn fetch(\n\t\t\t\t\t`http://localhost:5000/template/${Object.values(items)[0].id}`,\n\t\t\t\t\t{\n\t\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\t\tmode: \"cors\",\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\t\t\t\"x-access-token\": Cookies.get(\"token\"),\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t})\n\t\t\t.then((response) => response.json())\n\t\t\t.then((resp_items) => {\n\t\t\t\tsetMessage({\n\t\t\t\t\ttitle: storedTitle,\n\t\t\t\t\tmessage: Object.values(resp_items)[0].Message,\n\t\t\t\t\turl: Object.values(resp_items)[0].url,\n\t\t\t\t\tloaded: true,\n\t\t\t\t});\n\t\t\t});\n\t}, []);\n\n\t// SELECTED TEMPLATES\n\tconst selectedTemplate = (e) => {\n\t\tvar index = e.target.selectedIndex;\n\t\tconst selection_id = e.target.value;\n\n\t\tsetSelectID({ id: selection_id, loaded: true });\n\n\t\tfetch(`http://localhost:5000/template/${selection_id}`, {\n\t\t\tmethod: \"GET\",\n\t\t\tmode: \"cors\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\"x-access-token\": Cookies.get(\"token\"),\n\t\t\t},\n\t\t})\n\t\t\t.then((response) => response.json())\n\t\t\t.then((resp_items) => {\n\t\t\t\tconsole.log(`resp items: ${resp_items} `)\n\t\t\t\tsetMessage({\n\t\t\t\t\ttitle: e.target[index].text,\n\t\t\t\t\tmessage: Object.values(resp_items)[0].Message,\n\t\t\t\t\turl: Object.values(resp_items)[0].url,\n\t\t\t\t\tloaded: true,\n\t\t\t\t});\n\t\t\t});\n\t};\n\n\t// Deleting selection\n\tconst deleteSelected = () => {\n\t\tsetDeleteOnClick('openDelete')\n\n\t\t// fetch(`http://localhost:5000/delete-messages/${selection_id}`,{\n\t};\nconst updateParentState = (childProps) =>{\nsetDeleteOnClick(childProps)\n}\n\t//Sending messages\n\tconst sendingmessages = () => {\n\t\tconst send_contacts = []\n\t\tconst send_names = []\n\t\tconst send_img = `http://localhost:5000/images/${selectID.id}`\n\t\tconst send_msg = message.message\n\t\tconst send_temp_name = message.title\n\n\t\tconst send_url = message.url\n\n\t\tconst listOfContacts = contacts[0].contacts.items\n\t\tlistOfContacts.map((obj)=>{\n\t\t\tsend_contacts.push(obj.number)\n\t\t\tsend_names.push(obj.name)\n\t\t})\n\n\t\tconsole.log(send_contacts)\n\t\tfetch(`http://localhost:5000/send-messages`, {\n\t\t\tmethod: 'POST',\n\t\t\tmode: 'cors',\n\t\t\tbody: JSON.stringify({\n\t\t\t\tapi_numbers: send_contacts,\n\t\t\t\tapi_names: send_names,\n\t\t\t\tapi_msg: send_msg,\n\t\t\t\tapi_url: send_url\n\n\t\t\t}),\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\"x-access-token\": Cookies.get(\"token\"),\n\t\t\t}\n\n\n\t\t})\n\t}\n\t//  Render load conditions\n\tvar { loaded } = messageItem;\n\n\tif (!loaded) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<p>Loading...</p>\n\t\t\t</>\n\t\t);\n\t} else {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className='app-bg'>\n\n\t\t\t\t<h4 className='pagetitle pageDesc'><b>Template</b></h4>\n\n\t\t\t<div className='page_greeting messageIconsParentContainer'>\n\t\t\t<h2 className='pageDesc'>View Templates</h2>\n\t\t\t<div>\n\t\t\t\t<img style={{width: '18px', height: '18px', marginLeft: '40px', marginTop: '10px'}} onClick={deleteSelected} src={Delete} alt=''></img>\n\t\t\t\t<img style={{width: '18px', height: '18px', marginLeft: '10px', marginTop: '10px'}} onClick={updateOnClick} src={Update} alt=''></img>\n\t\t\t\t<img style={{width: '18px', height: '18px', marginLeft: '10px', marginTop: '10px'}} onClick={sendingmessages} src={Send} alt=''></img>\n\n\t\t\t</div>\n\n\t\t\t</div>\n\t\t\t<select id='selectId' onChange={selectedTemplate}>\n\t\t\t\t\t\t{messageItem.items.map((obj) => (\n\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tcolor: \"#6B6B6B\",\n\t\t\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\t\t\tflexDirection: \"column\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tkey={obj.id}\n\t\t\t\t\t\t\t\tname={obj.title}\n\t\t\t\t\t\t\t\tvalue={obj.id}>\n\t\t\t\t\t\t\t\t{obj.title}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</select>\n\n\t\t\t\t\t<div className='cardHolder'>\n\t\t\t\t\t\t<div className='message_card'>\n\t\t\t\t\t\t\t<div className='image_holder'>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tclassName='displayImg'\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tselectID.loaded\n\t\t\t\t\t\t\t\t\t\t\t? `http://localhost:5000/images/${selectID.id}`\n\t\t\t\t\t\t\t\t\t\t\t: `http://localhost:5000/images/4`\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt='content_image'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\ttextAlign: \"left\",\n\t\t\t\t\t\t\t\t\t\tpaddingLeft: \"20px\",\n\t\t\t\t\t\t\t\t\t\tpaddingRight: \"20px\",\n\t\t\t\t\t\t\t\t\t\tmarginBottom: \"2px\",\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t{message.loaded ? message.message : \"No message found\"}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\ttextAlign: \"left\",\n\t\t\t\t\t\t\t\t\t\tpaddingLeft: \"20px\",\n\t\t\t\t\t\t\t\t\t\tpaddingRight: \"20px\",\n\t\t\t\t\t\t\t\t\t\tcolor: \"blue\",\n\t\t\t\t\t\t\t\t\t\ttextDecoration: \"underline\",\n\t\t\t\t\t\t\t\t\t\tmarginTop: \"1px\",\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t{message.loaded ? message.url : \"No url found\"}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\n\t\t\t\t\t{/* Delete message component */}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<DeleteMessageComponent\n\t\t\t\t\t\t\tselected={selectID.id}\n\t\t\t\t\t\t\tcond={deleteOnClick}\n\t\t\t\t\t\t\tonNameChange = {updateParentState}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div style={showUpdate ? updateStyle : updateStyleNone}>\n\t\t\t\t\t\t<button onClick={exOnClick} style={closeBtn}>\n\t\t\t\t\t\t\tX\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<UpdateMessages\n\t\t\t\t\t\t\tid={selectID.id}\n\t\t\t\t\t\t\ttitle={message.title}\n\t\t\t\t\t\t\tmessage={message.message}\n\t\t\t\t\t\t\turl={message.url}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className='msgBtn'>\n\t\t\t\t\t\t<CreateMsgbutton />\n\t\t\t\t\t</div>\n\t\t\t\t\t<Footer />\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n};\n\nexport default Message;\n"]},"metadata":{},"sourceType":"module"}