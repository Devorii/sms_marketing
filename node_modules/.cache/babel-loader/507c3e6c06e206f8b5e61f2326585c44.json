{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/devorii/Desktop/smsmarket/oriisms/src/pages/Message.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, Ref, useRef, useContext } from \"react\";\nimport Footer from \"../components/Footer\";\nimport Cookies from \"js-cookie\";\nimport CreateMsgbutton from \"../components/Createmsgbutton\";\nimport DeleteMessageComponent from \"../components/DeleteMessageComponent\";\nimport UpdateMessages from \"../components/UpdateMessages\";\nimport { ContactContext } from \"../context/ContactsCtxt\";\n\nconst Message = props => {\n  _s();\n\n  const {\n    contacts\n  } = useContext(ContactContext);\n  const [messageItem, setMessageItem] = useState({\n    items: null,\n    loaded: false\n  });\n  const [updateStyle, setUpdateStyle] = useState({\n    width: \"100%\",\n    display: \"flex\",\n    justifyContent: \"center\"\n  });\n  const [updateStyleNone, setUpdateStyleNone] = useState({\n    width: \"100%\",\n    display: \"none\",\n    justifyContent: \"center\"\n  });\n  const [selected, setSelected] = useState(props.selected);\n  const [selectID, setSelectID] = useState({\n    id: 0,\n    loaded: false\n  });\n  const [message, setMessage] = useState({\n    title: \"\",\n    message: \"\",\n    url: \"\",\n    loaded: false\n  });\n  const [deleteOnClick, setDeleteOnClick] = useState(false);\n  const [deleteBtn, setDeleteBtn] = useState({\n    background: \"none\",\n    border: \"none\",\n    borderBottom: \"1px solid black\",\n    marginTop: \"25px\",\n    marginLeft: \"10px\"\n  });\n  const [closeBtn, SetCloseBtn] = useState({\n    top: \"0\",\n    right: \"0\",\n    position: \"fixed\",\n    backgroundColor: \"#34A1AD\",\n    border: \"none\",\n    padding: \"10px\",\n    fontSize: \"20px\",\n    color: \"white\"\n  });\n  const [showUpdate, setShowUpdate] = useState(false);\n\n  const exOnClick = () => setShowUpdate(!showUpdate);\n\n  const updateOnClick = () => setShowUpdate(true);\n\n  useEffect(() => {\n    var storedTitle;\n    fetch(\"http://localhost:5000/onload-messages\", {\n      method: \"GET\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"x-access-token\": Cookies.get(\"token\")\n      }\n    }).then(resp => resp.json()).then(items => {\n      setMessageItem({\n        items: Object.values(items),\n        loaded: true\n      }); // Call another fetch to return an obj\n\n      setSelectID({\n        id: Object.values(items)[0].id,\n        loaded: true\n      });\n      storedTitle = Object.values(items)[0].title;\n      return fetch(`http://localhost:5000/template/${Object.values(items)[0].id}`, {\n        method: \"GET\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"x-access-token\": Cookies.get(\"token\")\n        }\n      });\n    }).then(response => response.json()).then(resp_items => {\n      setMessage({\n        title: storedTitle,\n        message: Object.values(resp_items)[0].Message,\n        url: Object.values(resp_items)[0].url,\n        loaded: true\n      });\n    });\n  }, []); // SELECTED TEMPLATES\n\n  const selectedTemplate = e => {\n    var index = e.target.selectedIndex;\n    const selection_id = e.target.value;\n    setSelectID({\n      id: selection_id,\n      loaded: true\n    });\n    fetch(`http://localhost:5000/template/${selection_id}`, {\n      method: \"GET\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"x-access-token\": Cookies.get(\"token\")\n      }\n    }).then(response => response.json()).then(resp_items => {\n      setMessage({\n        title: e.target[index].text,\n        message: Object.values(resp_items)[0].Message,\n        url: Object.values(resp_items)[0].url,\n        loaded: true\n      });\n    });\n  }; // Deleting selection\n\n\n  const deleteSelected = () => {\n    setDeleteOnClick(!deleteOnClick); // fetch(`http://localhost:5000/delete-messages/${selection_id}`,{\n  }; //Sending messages\n\n\n  const sendingmessages = () => {\n    // const send_contacts = []\n    // const send_names = []\n    const send_img = `http://localhost:5000/images/${selectID.id}`;\n    const send_msg = message.message;\n    const send_url = message.url; // listOfContacts.map((obj)=>{\n    // \tconsole.log(obj)\n    // \tsend_contacts.push(obj.number)\n    // })\n\n    fetch(`http://localhost:5000/send-messages`, {\n      method: 'POST',\n      mode: 'cors',\n      body: JSON.stringify({\n        api_numbers: contacts[0].contacts.items,\n        api_msg: send_msg,\n        api_url: send_url\n      }),\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"x-access-token\": Cookies.get(\"token\")\n      }\n    });\n  }; //  Render load conditions\n\n\n  var {\n    loaded\n  } = messageItem;\n\n  if (!loaded) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 5\n      }, this)\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"app-bg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cardHolder\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message_card\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image_holder\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"displayImg\",\n                src: selectID.loaded ? `http://localhost:5000/images/${selectID.id}` : `http://localhost:5000/images/4`,\n                alt: \"content_image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  textAlign: \"left\",\n                  paddingLeft: \"10px\",\n                  marginBottom: \"2px\"\n                },\n                children: message.loaded ? message.message : \"No message found\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  textAlign: \"left\",\n                  paddingLeft: \"10px\",\n                  color: \"blue\",\n                  textDecoration: \"underline\",\n                  marginTop: \"1px\"\n                },\n                children: message.loaded ? message.url : \"No url found\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"flex-end\",\n            marginRight: \"5%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: deleteBtn,\n            onClick: deleteSelected,\n            children: deleteOnClick ? \"Cancel\" : \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: deleteBtn,\n            onClick: updateOnClick,\n            children: \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: deleteBtn,\n            onClick: sendingmessages,\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            textAlign: \"left\",\n            marginLeft: \"5%\"\n          },\n          children: \"Select Template\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"selectId\",\n          onChange: selectedTemplate,\n          children: messageItem.items.map(obj => /*#__PURE__*/_jsxDEV(\"option\", {\n            style: {\n              color: \"#6B6B6B\",\n              display: \"flex\",\n              flexDirection: \"column\"\n            },\n            name: obj.title,\n            value: obj.id,\n            children: obj.title\n          }, obj.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 8\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: deleteOnClick ? {\n            visibility: \"visible\"\n          } : {\n            visibility: \"hidden\"\n          },\n          children: /*#__PURE__*/_jsxDEV(DeleteMessageComponent, {\n            selected: selectID.id,\n            cond: deleteOnClick\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: showUpdate ? updateStyle : updateStyleNone,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: exOnClick,\n            style: closeBtn,\n            children: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(UpdateMessages, {\n            id: selectID.id,\n            title: message.title,\n            message: message.message,\n            url: message.url\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"msgBtn\",\n          children: /*#__PURE__*/_jsxDEV(CreateMsgbutton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 5\n      }, this)\n    }, void 0, false);\n  }\n};\n\n_s(Message, \"ApcrS0aM76lArUBbwpyjruYz4WA=\");\n\n_c = Message;\nexport default Message;\n\nvar _c;\n\n$RefreshReg$(_c, \"Message\");","map":{"version":3,"sources":["/Users/devorii/Desktop/smsmarket/oriisms/src/pages/Message.js"],"names":["React","useEffect","useState","Ref","useRef","useContext","Footer","Cookies","CreateMsgbutton","DeleteMessageComponent","UpdateMessages","ContactContext","Message","props","contacts","messageItem","setMessageItem","items","loaded","updateStyle","setUpdateStyle","width","display","justifyContent","updateStyleNone","setUpdateStyleNone","selected","setSelected","selectID","setSelectID","id","message","setMessage","title","url","deleteOnClick","setDeleteOnClick","deleteBtn","setDeleteBtn","background","border","borderBottom","marginTop","marginLeft","closeBtn","SetCloseBtn","top","right","position","backgroundColor","padding","fontSize","color","showUpdate","setShowUpdate","exOnClick","updateOnClick","storedTitle","fetch","method","mode","headers","get","then","resp","json","Object","values","response","resp_items","selectedTemplate","e","index","target","selectedIndex","selection_id","value","text","deleteSelected","sendingmessages","send_img","send_msg","send_url","body","JSON","stringify","api_numbers","api_msg","api_url","textAlign","paddingLeft","marginBottom","textDecoration","marginRight","map","obj","flexDirection","visibility"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, Ref, useRef, useContext } from \"react\";\nimport Footer from \"../components/Footer\";\nimport Cookies from \"js-cookie\";\nimport CreateMsgbutton from \"../components/Createmsgbutton\";\nimport DeleteMessageComponent from \"../components/DeleteMessageComponent\";\nimport UpdateMessages from \"../components/UpdateMessages\";\nimport { ContactContext } from \"../context/ContactsCtxt\"\n\nconst Message = (props) => {\n\tconst {contacts} = useContext(ContactContext)\n\n\n\tconst [messageItem, setMessageItem] = useState({\n\t\titems: null,\n\t\tloaded: false,\n\t});\n\tconst [updateStyle, setUpdateStyle] = useState({\n\t\twidth: \"100%\",\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t});\n\tconst [updateStyleNone, setUpdateStyleNone] = useState({\n\t\twidth: \"100%\",\n\t\tdisplay: \"none\",\n\t\tjustifyContent: \"center\",\n\t});\n\tconst [selected, setSelected] = useState(props.selected);\n\tconst [selectID, setSelectID] = useState({\n\t\tid: 0,\n\t\tloaded: false,\n\t});\n\tconst [message, setMessage] = useState({\n\t\ttitle: \"\",\n\t\tmessage: \"\",\n\t\turl: \"\",\n\t\tloaded: false,\n\t});\n\tconst [deleteOnClick, setDeleteOnClick] = useState(false);\n\n\tconst [deleteBtn, setDeleteBtn] = useState({\n\t\tbackground: \"none\",\n\t\tborder: \"none\",\n\t\tborderBottom: \"1px solid black\",\n\t\tmarginTop: \"25px\",\n\t\tmarginLeft: \"10px\",\n\t});\n\tconst [closeBtn, SetCloseBtn] = useState({\n\t\ttop: \"0\",\n\t\tright: \"0\",\n\t\tposition: \"fixed\",\n\t\tbackgroundColor: \"#34A1AD\",\n\t\tborder: \"none\",\n\t\tpadding: \"10px\",\n\t\tfontSize: \"20px\",\n\t\tcolor: \"white\",\n\t});\n\tconst [showUpdate, setShowUpdate] = useState(false);\n\n\tconst exOnClick = () => setShowUpdate(!showUpdate);\n\tconst updateOnClick = () => setShowUpdate(true);\n\n\tuseEffect(() => {\n\t\tvar storedTitle;\n\n\t\tfetch(\"http://localhost:5000/onload-messages\", {\n\t\t\tmethod: \"GET\",\n\t\t\tmode: \"cors\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\"x-access-token\": Cookies.get(\"token\"),\n\t\t\t},\n\t\t})\n\t\t\t.then((resp) => resp.json())\n\t\t\t.then((items) => {\n\t\t\t\tsetMessageItem({ items: Object.values(items), loaded: true });\n\t\t\t\t// Call another fetch to return an obj\n\t\t\t\tsetSelectID({ id: Object.values(items)[0].id, loaded: true });\n\t\t\t\tstoredTitle = Object.values(items)[0].title;\n\n\t\t\t\treturn fetch(\n\t\t\t\t\t`http://localhost:5000/template/${Object.values(items)[0].id}`,\n\t\t\t\t\t{\n\t\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\t\tmode: \"cors\",\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\t\t\t\"x-access-token\": Cookies.get(\"token\"),\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t})\n\t\t\t.then((response) => response.json())\n\t\t\t.then((resp_items) => {\n\t\t\t\tsetMessage({\n\t\t\t\t\ttitle: storedTitle,\n\t\t\t\t\tmessage: Object.values(resp_items)[0].Message,\n\t\t\t\t\turl: Object.values(resp_items)[0].url,\n\t\t\t\t\tloaded: true,\n\t\t\t\t});\n\t\t\t});\n\t}, []);\n\n\t// SELECTED TEMPLATES\n\tconst selectedTemplate = (e) => {\n\t\tvar index = e.target.selectedIndex;\n\t\tconst selection_id = e.target.value;\n\n\t\tsetSelectID({ id: selection_id, loaded: true });\n\n\t\tfetch(`http://localhost:5000/template/${selection_id}`, {\n\t\t\tmethod: \"GET\",\n\t\t\tmode: \"cors\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\"x-access-token\": Cookies.get(\"token\"),\n\t\t\t},\n\t\t})\n\t\t\t.then((response) => response.json())\n\t\t\t.then((resp_items) => {\n\t\t\t\tsetMessage({\n\t\t\t\t\ttitle: e.target[index].text,\n\t\t\t\t\tmessage: Object.values(resp_items)[0].Message,\n\t\t\t\t\turl: Object.values(resp_items)[0].url,\n\t\t\t\t\tloaded: true,\n\t\t\t\t});\n\t\t\t});\n\t};\n\n\t// Deleting selection\n\tconst deleteSelected = () => {\n\t\tsetDeleteOnClick(!deleteOnClick);\n\t\t// fetch(`http://localhost:5000/delete-messages/${selection_id}`,{\n\t};\n\n\t//Sending messages\n\tconst sendingmessages = () => {\n\t\t// const send_contacts = []\n\t\t// const send_names = []\n\t\tconst send_img = `http://localhost:5000/images/${selectID.id}`\n\t\tconst send_msg = message.message\n\t\tconst send_url = message.url\n\n\t\t// listOfContacts.map((obj)=>{\n\t\t// \tconsole.log(obj)\n\t\t// \tsend_contacts.push(obj.number)\n\t\t// })\n\t\tfetch(`http://localhost:5000/send-messages`, {\n\t\t\tmethod: 'POST',\n\t\t\tmode: 'cors',\n\t\t\tbody: JSON.stringify({\n\t\t\t\tapi_numbers: contacts[0].contacts.items,\n\t\t\t\tapi_msg: send_msg,\n\t\t\t\tapi_url: send_url\n\n\t\t\t}),\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\"x-access-token\": Cookies.get(\"token\"),\n\t\t\t}\n\n\n\t\t})\n\t}\n\t//  Render load conditions\n\tvar { loaded } = messageItem;\n\n\tif (!loaded) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<p>Loading...</p>\n\t\t\t</>\n\t\t);\n\t} else {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className='app-bg'>\n\t\t\t\t\t<div className='cardHolder'>\n\t\t\t\t\t\t<div className='message_card'>\n\t\t\t\t\t\t\t<div className='image_holder'>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tclassName='displayImg'\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tselectID.loaded\n\t\t\t\t\t\t\t\t\t\t\t? `http://localhost:5000/images/${selectID.id}`\n\t\t\t\t\t\t\t\t\t\t\t: `http://localhost:5000/images/4`\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt='content_image'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\ttextAlign: \"left\",\n\t\t\t\t\t\t\t\t\t\tpaddingLeft: \"10px\",\n\t\t\t\t\t\t\t\t\t\tmarginBottom: \"2px\",\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t{message.loaded ? message.message : \"No message found\"}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\ttextAlign: \"left\",\n\t\t\t\t\t\t\t\t\t\tpaddingLeft: \"10px\",\n\t\t\t\t\t\t\t\t\t\tcolor: \"blue\",\n\t\t\t\t\t\t\t\t\t\ttextDecoration: \"underline\",\n\t\t\t\t\t\t\t\t\t\tmarginTop: \"1px\",\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t{message.loaded ? message.url : \"No url found\"}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\tjustifyContent: \"flex-end\",\n\t\t\t\t\t\t\tmarginRight: \"5%\",\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t<button style={deleteBtn} onClick={deleteSelected}>\n\t\t\t\t\t\t\t{deleteOnClick ? \"Cancel\" : \"Delete\"}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button style={deleteBtn} onClick={updateOnClick}>\n\t\t\t\t\t\t\tUpdate\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button style={deleteBtn} onClick={sendingmessages}>\n\t\t\t\t\t\t\tSend\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<h2 style={{ textAlign: \"left\", marginLeft: \"5%\" }}>\n\t\t\t\t\t\tSelect Template\n\t\t\t\t\t</h2>\n\t\t\t\t\t<select id='selectId' onChange={selectedTemplate}>\n\t\t\t\t\t\t{messageItem.items.map((obj) => (\n\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tcolor: \"#6B6B6B\",\n\t\t\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\t\t\tflexDirection: \"column\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tkey={obj.id}\n\t\t\t\t\t\t\t\tname={obj.title}\n\t\t\t\t\t\t\t\tvalue={obj.id}>\n\t\t\t\t\t\t\t\t{obj.title}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</select>\n\n\t\t\t\t\t{/* Delete message component */}\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\tdeleteOnClick\n\t\t\t\t\t\t\t\t? { visibility: \"visible\" }\n\t\t\t\t\t\t\t\t: { visibility: \"hidden\" }\n\t\t\t\t\t\t}>\n\t\t\t\t\t\t<DeleteMessageComponent\n\t\t\t\t\t\t\tselected={selectID.id}\n\t\t\t\t\t\t\tcond={deleteOnClick}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div style={showUpdate ? updateStyle : updateStyleNone}>\n\t\t\t\t\t\t<button onClick={exOnClick} style={closeBtn}>\n\t\t\t\t\t\t\tX\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<UpdateMessages\n\t\t\t\t\t\t\tid={selectID.id}\n\t\t\t\t\t\t\ttitle={message.title}\n\t\t\t\t\t\t\tmessage={message.message}\n\t\t\t\t\t\t\turl={message.url}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className='msgBtn'>\n\t\t\t\t\t\t<CreateMsgbutton />\n\t\t\t\t\t</div>\n\t\t\t\t\t<Footer />\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n};\n\nexport default Message;\n"]},"metadata":{},"sourceType":"module"}