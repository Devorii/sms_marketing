{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/devorii/Desktop/sms_beta/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useContext}from\"react\";import Footer from\"../components/Footer\";import Cookies from\"js-cookie\";import Createbutton from\"../components/Createbutton\";import PopupModal from\"../components/Popup-box\";import{ContactContext}from\"../context/ContactsCtxt\";import Sms from\"../assets/sms.svg\";var Contacts=function Contacts(){var _useContext=useContext(ContactContext),contacts=_useContext.contacts,dispatch=_useContext.dispatch;var _useState=useState({number:\"loading\",loaded:false}),_useState2=_slicedToArray(_useState,2),twilioNumber=_useState2[0],setTwilioNumber=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),popup=_useState4[0],setPopup=_useState4[1];var _useState5=useState({id:\"\",name:\"\",number:\"\"}),_useState6=_slicedToArray(_useState5,2),selectedClient=_useState6[0],setSelectedClient=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),query=_useState8[0],setQuery=_useState8[1];useEffect(function(){// setCookies(Cookies.get('token'))\n// console.log(Cookies.get(\"token\"));\nfetch(\"http://devorii.pythonanywhere.com/read-contacts\",{method:\"GET\",mode:\"cors\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",\"Access-Control-Allow-Origin\":\"*\",\"x-access-token\":Cookies.get(\"token\")}}).then(function(resp){return resp.json();}).then(function(items){dispatch({type:\"ADD_CONTACTS\",contacts:{items:Object.values(items),loaded:true}});// Fetch twilio account number\nfetch(\"http://devorii.pythonanywhere.com/twilio-number\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",\"Access-Control-Allow-Origin\":\"*\",\"x-access-token\":Cookies.get(\"token\")}}).then(function(resp){return resp.json();}).then(function(obj){return setTwilioNumber({number:obj.message,loaded:true});});});},[query]);var loaded=contacts[0];function popupModal(id,name,num){setPopup(!popup);setSelectedClient({id:id,name:name,number:num});}if(loaded===undefined){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"app-bg\",children:[\" \",/*#__PURE__*/_jsx(\"div\",{className:\"pageTop\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"pagetitle pageDesc\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Contacts\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"page_greeting\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"pageDesc\",children:\"Business Number\"}),/*#__PURE__*/_jsxs(\"h2\",{className:\"pageDesc\",children:[twilioNumber.number,/*#__PURE__*/_jsx(\"img\",{style:{marginLeft:\"4px\"},id:\"waveIcon\",src:Sms,alt:\"wave\"})]})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"ulStyle\",children:contacts[0].contacts.items.map(function(obj){return/*#__PURE__*/_jsxs(\"li\",{className:\"scrollDiv\",style:{color:\"#6B6B6B\",display:\"flex\",flexDirection:\"column\"},onClick:function onClick(){return popupModal(obj.id,obj.name,obj.number);},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:\"#0244AE\"},children:/*#__PURE__*/_jsx(\"b\",{children:obj.name})}),obj.number]},obj.id);})}),/*#__PURE__*/_jsxs(\"div\",{id:\"create-btn-wrapper\",children:[popup?/*#__PURE__*/_jsx(PopupModal,{id:selectedClient.id,name:selectedClient.name,num:selectedClient.number}):null,/*#__PURE__*/_jsx(Createbutton,{})]}),/*#__PURE__*/_jsx(Footer,{})]});}};export default Contacts;","map":{"version":3,"sources":["/Users/devorii/Desktop/sms_beta/src/pages/Contacts.js"],"names":["React","useEffect","useState","useContext","Footer","Cookies","Createbutton","PopupModal","ContactContext","Contacts","contacts","dispatch","number","loaded","twilioNumber","setTwilioNumber","popup","setPopup","id","name","selectedClient","setSelectedClient","query","setQuery","fetch","method","mode","headers","get","then","resp","json","items","type","Object","values","obj","message","popupModal","num","undefined","marginLeft","Sms","map","color","display","flexDirection"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport Footer from \"../components/Footer\";\nimport Cookies from \"js-cookie\";\nimport Createbutton from \"../components/Createbutton\";\nimport PopupModal from \"../components/Popup-box\";\nimport { ContactContext } from \"../context/ContactsCtxt\";\nimport Sms from \"../assets/sms.svg\";\n\nconst Contacts = () => {\n\tconst { contacts, dispatch } = useContext(ContactContext);\n\n\tconst [twilioNumber, setTwilioNumber] = useState({\n\t\tnumber: \"loading\",\n\t\tloaded: false,\n\t});\n\n\tconst [popup, setPopup] = useState(false);\n\tconst [selectedClient, setSelectedClient] = useState({\n\t\tid: \"\",\n\t\tname: \"\",\n\t\tnumber: \"\",\n\t});\n\tconst [query, setQuery] = useState();\n\n\tuseEffect(() => {\n\t\t// setCookies(Cookies.get('token'))\n\t\t// console.log(Cookies.get(\"token\"));\n\n\t\tfetch(\"http://devorii.pythonanywhere.com/read-contacts\", {\n\t\t\tmethod: \"GET\",\n\t\t\tmode: \"cors\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\"x-access-token\": Cookies.get(\"token\"),\n\t\t\t},\n\t\t})\n\t\t\t.then((resp) => resp.json())\n\t\t\t.then((items) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"ADD_CONTACTS\",\n\t\t\t\t\tcontacts: { items: Object.values(items), loaded: true },\n\t\t\t\t});\n\t\t\t\t// Fetch twilio account number\n\t\t\t\tfetch(\"http://devorii.pythonanywhere.com/twilio-number\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\tmode: \"cors\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\t\t\"x-access-token\": Cookies.get(\"token\"),\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\t\t.then((resp) => resp.json())\n\t\t\t\t\t.then((obj) =>\n\t\t\t\t\t\tsetTwilioNumber({ number: obj.message, loaded: true })\n\t\t\t\t\t);\n\t\t\t});\n\t}, [query]);\n\n\tconst loaded = contacts[0];\n\n\tfunction popupModal(id, name, num) {\n\t\tsetPopup(!popup);\n\t\tsetSelectedClient({\n\t\t\tid: id,\n\t\t\tname: name,\n\t\t\tnumber: num,\n\t\t});\n\t}\n\n\tif (loaded === undefined) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<p>Loading...</p>\n\t\t\t</>\n\t\t);\n\t} else {\n\t\treturn (\n\t\t\t<div className='app-bg'>\n\t\t\t\t{\" \"}\n\t\t\t\t<div className='pageTop'>\n\t\t\t\t\t<h4 className='pagetitle pageDesc'>\n\t\t\t\t\t\t<b>Contacts</b>\n\t\t\t\t\t</h4>\n\t\t\t\t</div>\n\t\t\t\t<div className='page_greeting'>\n\t\t\t\t\t<h2 className='pageDesc'>Business Number</h2>\n\t\t\t\t\t<h2 className='pageDesc'>\n\t\t\t\t\t\t{twilioNumber.number}\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tstyle={{ marginLeft: \"4px\" }}\n\t\t\t\t\t\t\tid='waveIcon'\n\t\t\t\t\t\t\tsrc={Sms}\n\t\t\t\t\t\t\talt='wave'></img>\n\t\t\t\t\t</h2>\n\t\t\t\t</div>\n\t\t\t\t<ul className='ulStyle'>\n\t\t\t\t\t{contacts[0].contacts.items.map((obj) => (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tclassName='scrollDiv'\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: \"#6B6B6B\",\n\t\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\t\tflexDirection: \"column\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tkey={obj.id}\n\t\t\t\t\t\t\tonClick={() => popupModal(obj.id, obj.name, obj.number)}>\n\t\t\t\t\t\t\t<div style={{ color: \"#0244AE\" }}>\n\t\t\t\t\t\t\t\t<b>{obj.name}</b>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{obj.number}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t\t<div id='create-btn-wrapper'>\n\t\t\t\t\t{popup ? (\n\t\t\t\t\t\t<PopupModal\n\t\t\t\t\t\t\tid={selectedClient.id}\n\t\t\t\t\t\t\tname={selectedClient.name}\n\t\t\t\t\t\t\tnum={selectedClient.number}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<Createbutton />\n\t\t\t\t</div>\n\t\t\t\t<Footer />\n\t\t\t</div>\n\t\t);\n\t}\n};\n\nexport default Contacts;\n"]},"metadata":{},"sourceType":"module"}