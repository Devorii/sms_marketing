{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/devorii/Desktop/smsmarket/oriisms/src/Message.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, Ref, useRef } from 'react';\nimport Footer from './components/Footer';\nimport Cookies from \"js-cookie\";\nimport CreateMsgbutton from './components/Createmsgbutton';\nimport DeleteMessageComponent from './components/DeleteMessageComponent';\nimport UpdateMessages from './components/UpdateMessages';\n\nconst Message = props => {\n  _s();\n\n  const [messageItem, setMessageItem] = useState({\n    items: null,\n    loaded: false\n  });\n  const [updateStyle, setUpdateStyle] = useState({\n    width: '100%',\n    display: 'flex',\n    justifyContent: 'center'\n  });\n  const [updateStyleNone, setUpdateStyleNone] = useState({\n    width: '100%',\n    display: 'none',\n    justifyContent: 'center'\n  });\n  const [selected, setSelected] = useState(props.selected);\n  const [selectID, setSelectID] = useState({\n    id: 0,\n    loaded: false\n  });\n  const [message, setMessage] = useState({\n    message: '',\n    url: '',\n    loaded: false\n  });\n  const [deleteOnClick, setDeleteOnClick] = useState(false);\n  const [deleteBtn, setDeleteBtn] = useState({\n    background: 'none',\n    border: 'none',\n    borderBottom: '1px solid black',\n    marginTop: '25px',\n    marginLeft: '10px'\n  });\n  const [closeBtn, SetCloseBtn] = useState({\n    top: '0',\n    right: '0',\n    position: 'fixed',\n    backgroundColor: '#34A1AD',\n    border: 'none',\n    padding: '10px',\n    fontSize: '20px',\n    color: 'white'\n  });\n  const [showUpdate, setShowUpdate] = useState(false);\n\n  const exOnClick = () => setShowUpdate(!showUpdate);\n\n  const updateOnClick = () => setShowUpdate(true);\n\n  useEffect(() => {\n    fetch(\"http://localhost:5000/onload-messages\", {\n      method: \"GET\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"x-access-token\": Cookies.get(\"token\")\n      }\n    }).then(resp => resp.json()).then(items => {\n      setMessageItem({\n        items: Object.values(items),\n        loaded: true\n      }); // Call another fetch to return an obj\n\n      setSelectID({\n        id: Object.values(items)[0].id,\n        loaded: true\n      });\n      return fetch(`http://localhost:5000/template/${Object.values(items)[0].id}`, {\n        method: \"GET\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"x-access-token\": Cookies.get(\"token\")\n        }\n      });\n    }).then(response => response.json()).then(resp_items => {\n      setMessage({\n        message: Object.values(resp_items)[0].Message,\n        url: Object.values(resp_items)[0].url,\n        loaded: true\n      });\n      console.log(Object.values(resp_items)[0].Message);\n    });\n  }, []); // TESTING\n\n  const selectedTemplate = e => {\n    var indexm = e.target.selectedIndex;\n    console.log(e.target[indexm].text);\n    const selection_id = e.target.value;\n    setSelectID({\n      id: selection_id,\n      loaded: true\n    });\n    fetch(`http://localhost:5000/template/${selection_id}`, {\n      method: \"GET\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"x-access-token\": Cookies.get(\"token\")\n      }\n    }).then(response => response.json()).then(resp_items => {\n      setMessage({\n        message: Object.values(resp_items)[0].Message,\n        url: Object.values(resp_items)[0].url,\n        loaded: true\n      });\n    });\n  }; // Deleting selection\n\n\n  const deleteSelected = () => {\n    setDeleteOnClick(!deleteOnClick); // fetch(`http://localhost:5000/delete-messages/${selection_id}`,{\n  }; //  Render load conditions\n\n\n  var {\n    loaded\n  } = messageItem;\n\n  if (!loaded) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 5\n      }, this)\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"app-bg\",\n        children: [\n        /* Card  */\n        console.log(selectID.id), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cardHolder\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message_card\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image_holder\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"displayImg\",\n                src: selectID.loaded ? `http://localhost:5000/images/${selectID.id}` : `http://localhost:5000/images/4`,\n                alt: \"content_image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 6\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  textAlign: 'left',\n                  paddingLeft: '10px',\n                  marginBottom: '2px'\n                },\n                children: message.loaded ? message.message : 'No message found'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 6\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  textAlign: 'left',\n                  paddingLeft: '10px',\n                  color: 'blue',\n                  textDecoration: 'underline',\n                  marginTop: '1px'\n                },\n                children: message.loaded ? message.url : 'No url found'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 6\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 5\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'flex-end',\n            marginRight: '5%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: deleteBtn,\n            onClick: deleteSelected,\n            children: deleteOnClick ? 'Cancel' : 'Delete'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 4\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: deleteBtn,\n            onClick: updateOnClick,\n            children: \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 4\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            textAlign: 'left',\n            marginLeft: '5%'\n          },\n          children: \"Select Template\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"selectId\",\n          onChange: selectedTemplate,\n          children: messageItem.items.map(obj => /*#__PURE__*/_jsxDEV(\"option\", {\n            style: {\n              color: '#6B6B6B',\n              display: 'flex',\n              flexDirection: 'column'\n            },\n            name: obj.title,\n            value: obj.id,\n            children: obj.title\n          }, obj.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: deleteOnClick ? {\n            visibility: 'visible'\n          } : {\n            visibility: 'hidden'\n          },\n          children: /*#__PURE__*/_jsxDEV(DeleteMessageComponent, {\n            selected: selectID.id,\n            cond: deleteOnClick\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 3\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: showUpdate ? updateStyle : updateStyleNone,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: exOnClick,\n            style: closeBtn,\n            children: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 3\n          }, this), /*#__PURE__*/_jsxDEV(UpdateMessages, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 3\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"msgBtn\",\n          children: /*#__PURE__*/_jsxDEV(CreateMsgbutton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n};\n\n_s(Message, \"3HtQemavl0AzJEpmYZQMifi5Pn8=\");\n\n_c = Message;\nexport default Message;\n\nvar _c;\n\n$RefreshReg$(_c, \"Message\");","map":{"version":3,"sources":["/Users/devorii/Desktop/smsmarket/oriisms/src/Message.js"],"names":["React","useEffect","useState","Ref","useRef","Footer","Cookies","CreateMsgbutton","DeleteMessageComponent","UpdateMessages","Message","props","messageItem","setMessageItem","items","loaded","updateStyle","setUpdateStyle","width","display","justifyContent","updateStyleNone","setUpdateStyleNone","selected","setSelected","selectID","setSelectID","id","message","setMessage","url","deleteOnClick","setDeleteOnClick","deleteBtn","setDeleteBtn","background","border","borderBottom","marginTop","marginLeft","closeBtn","SetCloseBtn","top","right","position","backgroundColor","padding","fontSize","color","showUpdate","setShowUpdate","exOnClick","updateOnClick","fetch","method","mode","headers","get","then","resp","json","Object","values","response","resp_items","console","log","selectedTemplate","e","indexm","target","selectedIndex","text","selection_id","value","deleteSelected","textAlign","paddingLeft","marginBottom","textDecoration","marginRight","map","obj","flexDirection","title","visibility"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, Ref, useRef } from 'react'\nimport Footer from './components/Footer'\nimport Cookies from \"js-cookie\";\nimport CreateMsgbutton from './components/Createmsgbutton';\nimport DeleteMessageComponent from './components/DeleteMessageComponent';\nimport UpdateMessages from './components/UpdateMessages';\n\nconst Message = (props) => {\n\tconst [messageItem, setMessageItem] = useState({\n\t\titems: null,\n\t\tloaded: false,\n\t});\n\tconst [updateStyle, setUpdateStyle] = useState({\n\t\twidth: '100%', display: 'flex', justifyContent: 'center'\n\t})\n\tconst [updateStyleNone, setUpdateStyleNone] = useState({\n\t\twidth: '100%', display: 'none', justifyContent: 'center'\n\t})\n\tconst [selected, setSelected] = useState(props.selected);\n\tconst [selectID, setSelectID] = useState({\n\t\tid: 0,\n\t\tloaded: false\n\t})\n\tconst [message, setMessage] = useState({\n\t\tmessage: '',\n\t\turl: '',\n\t\tloaded: false\n\t})\n\tconst [deleteOnClick, setDeleteOnClick] = useState(false)\n\n\tconst [deleteBtn, setDeleteBtn] = useState({\n\t\tbackground: 'none',\n\t\tborder: 'none',\n\t\tborderBottom: '1px solid black',\n\t\tmarginTop: '25px',\n\t\tmarginLeft: '10px'\n\t\t})\n\tconst [closeBtn, SetCloseBtn] = useState({\n\t\ttop: '0',\n\t\tright: '0',\n\t\tposition: 'fixed',\n\t\tbackgroundColor: '#34A1AD',\n\t\tborder: 'none',\n\t\tpadding: '10px',\n\t\tfontSize: '20px',\n\t\tcolor: 'white'\n\t})\nconst [showUpdate, setShowUpdate] = useState(false)\n\nconst exOnClick = () => setShowUpdate(!showUpdate)\nconst updateOnClick = () => setShowUpdate(true)\n\n\tuseEffect(() => {\n\n\t\tfetch(\"http://localhost:5000/onload-messages\", {\n\t\t\tmethod: \"GET\",\n\t\t\tmode: \"cors\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\"x-access-token\": Cookies.get(\"token\"),\n\t\t\t},\n\t\t})\n\t\t\t.then((resp) => resp.json())\n\t\t\t.then((items) => {\n\t\t\t\tsetMessageItem({ items: Object.values(items), loaded: true });\n\t\t\t\t// Call another fetch to return an obj\n\t\t\t\tsetSelectID({id: Object.values(items)[0].id, loaded: true})\n\n\t\t\t\treturn fetch(`http://localhost:5000/template/${Object.values(items)[0].id}`,{\n\t\t\t\tmethod: \"GET\",\n\t\t\t\tmode: \"cors\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\t\"x-access-token\": Cookies.get(\"token\"),\n\t\t\t\t}\n\t\t\t\t})\n\t\t\t}).then((response) => response.json())\n\t\t\t.then((resp_items) =>{\n\t\t\t\tsetMessage({message: Object.values(resp_items)[0].Message, url: Object.values(resp_items)[0].url, loaded: true})\n\t\t\t\tconsole.log(Object.values(resp_items)[0].Message)\n\t\t\t})\n\n\n\n\n\t}, []);\n\n\n\n\n// TESTING\nconst selectedTemplate = e => {\n\tvar indexm = e.target.selectedIndex;\n\tconsole.log(e.target[indexm].text)\n\tconst selection_id = e.target.value\n\nsetSelectID({id: selection_id, loaded: true})\n\nfetch(`http://localhost:5000/template/${selection_id}`,{\n\t\t\t\tmethod: \"GET\",\n\t\t\t\tmode: \"cors\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\t\"x-access-token\": Cookies.get(\"token\"),\n\t\t\t\t}\n\t\t\t\t}).then((response) => response.json())\n\t\t\t.then((resp_items) =>{\n\t\t\t\tsetMessage({message: Object.values(resp_items)[0].Message, url: Object.values(resp_items)[0].url, loaded: true})\n\t\t\t})\n}\n\n// Deleting selection\nconst deleteSelected = () => {\n\tsetDeleteOnClick(!deleteOnClick)\n\t// fetch(`http://localhost:5000/delete-messages/${selection_id}`,{\n\n}\n\n\n//  Render load conditions\n    var {loaded } = messageItem;\n\n\tif (!loaded) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<p>Loading...</p>\n\t\t\t</>\n\t\t);\n\t} else {\n\n    return(\n        <>\n        <div className='app-bg'>\n            {/* Card  */ console.log(selectID.id)}\n            <div className='cardHolder'>\n            <div className='message_card'>\n\t\t\t\t<div className=\"image_holder\">\n\t\t\t\t\t<img className=\"displayImg\" src={selectID.loaded ? `http://localhost:5000/images/${selectID.id}`: `http://localhost:5000/images/4`} alt='content_image'/>\n\t\t\t\t\t<p style={{\n\t\t\t\t\t\ttextAlign: 'left',\n\t\t\t\t\t\tpaddingLeft: '10px',\n\t\t\t\t\t\tmarginBottom: '2px'}}>{message.loaded ? message.message : 'No message found'}</p>\n\t\t\t\t\t<p style={{\n\t\t\t\t\ttextAlign: 'left',\n\t\t\t\t\tpaddingLeft: '10px',\n\t\t\t\t\tcolor: 'blue',\n\t\t\t\t\ttextDecoration: 'underline',\n\t\t\t\t\tmarginTop: '1px'}}>{message.loaded ? message.url : 'No url found'}</p>\n\t\t\t\t</div>\n            </div>\n            </div>\n\t\t\t<div style={{display: 'flex', justifyContent: 'flex-end', marginRight: '5%'}}>\n\t\t\t<button style={deleteBtn} onClick={deleteSelected}>{deleteOnClick ? 'Cancel' : 'Delete'}</button>\n\t\t\t<button style={deleteBtn} onClick={updateOnClick}>Update</button>\n\t\t\t</div>\n        <h2 style={{textAlign: 'left', marginLeft: '5%'}}>Select Template</h2>\n        <select id='selectId' onChange={selectedTemplate}>\n            {messageItem.items.map((obj)=>(\n                <option style={{color:'#6B6B6B', display: 'flex', flexDirection: 'column'}} key={obj.id} name={obj.title} value={obj.id}>{obj.title}</option>\n                ))}\n        </select>\n\n\t\t{/* Delete message component */}\n\t\t<div style={deleteOnClick ? {visibility: 'visible'} : {visibility: 'hidden'}}>\n\t\t<DeleteMessageComponent selected={selectID.id} cond={deleteOnClick}/>\n\t\t</div>\n\n\t\t<div style={showUpdate? updateStyle : updateStyleNone}>\n\t\t<button onClick={exOnClick} style={closeBtn}>X</button>\n\t\t<UpdateMessages />\n\t\t</div>\n\n        <div className='msgBtn'>\n        <CreateMsgbutton />\n        </div>\n       <Footer />\n        </div>\n        </>\n    )}\n}\n\nexport default Message;"]},"metadata":{},"sourceType":"module"}