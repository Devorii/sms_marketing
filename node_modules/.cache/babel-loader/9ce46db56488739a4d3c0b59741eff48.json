{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/devorii/Desktop/smsmarket/oriisms/src/pages/Message.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, Ref, useRef, useContext } from \"react\";\nimport Footer from \"../components/Footer\";\nimport Cookies from \"js-cookie\";\nimport CreateMsgbutton from \"../components/Createmsgbutton\";\nimport DeleteMessageComponent from \"../components/DeleteMessageComponent\";\nimport UpdateMessages from \"../components/UpdateMessages\";\nimport { ContactContext } from \"../context/ContactsCtxt\";\nimport Create from \"../assets/messageIcons/create.svg\";\nimport Delete from \"../assets/messageIcons/delete.svg\";\nimport Update from \"../assets/messageIcons/update.svg\";\nimport Send from \"../assets/messageIcons/send.svg\";\n\nconst Message = props => {\n  _s();\n\n  const {\n    contacts\n  } = useContext(ContactContext);\n  const [messageItem, setMessageItem] = useState({\n    items: null,\n    loaded: false\n  });\n  const [updateStyle, setUpdateStyle] = useState({\n    width: \"100%\",\n    display: \"flex\",\n    justifyContent: \"center\"\n  });\n  const [updateStyleNone, setUpdateStyleNone] = useState({\n    width: \"100%\",\n    display: \"none\",\n    justifyContent: \"center\"\n  });\n  const [selected, setSelected] = useState(props.selected);\n  const [selectID, setSelectID] = useState({\n    id: 0,\n    loaded: false\n  });\n  const [message, setMessage] = useState({\n    title: \"\",\n    message: \"\",\n    url: \"\",\n    loaded: false\n  });\n  const [deleteOnClick, setDeleteOnClick] = useState(false);\n  const [closeBtn, SetCloseBtn] = useState({\n    top: \"0\",\n    right: \"0\",\n    position: \"fixed\",\n    backgroundColor: \"#34A1AD\",\n    width: '45px',\n    border: \"none\",\n    borderRadius: '100px',\n    padding: \"10px\",\n    fontSize: \"20px\",\n    color: \"white\"\n  });\n  const [showUpdate, setShowUpdate] = useState(false);\n\n  const exOnClick = () => setShowUpdate(!showUpdate);\n\n  const updateOnClick = () => setShowUpdate(true);\n\n  useEffect(() => {\n    var storedTitle;\n    fetch(\"http://localhost:5000/onload-messages\", {\n      method: \"GET\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"x-access-token\": Cookies.get(\"token\")\n      }\n    }).then(resp => resp.json()).then(items => {\n      setMessageItem({\n        items: Object.values(items),\n        loaded: true\n      }); // Call another fetch to return an obj\n\n      setSelectID({\n        id: Object.values(items)[0].id,\n        loaded: true\n      });\n      storedTitle = Object.values(items)[0].title;\n      return fetch(`http://localhost:5000/template/${Object.values(items)[0].id}`, {\n        method: \"GET\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"x-access-token\": Cookies.get(\"token\")\n        }\n      });\n    }).then(response => response.json()).then(resp_items => {\n      setMessage({\n        title: storedTitle,\n        message: Object.values(resp_items)[0].Message,\n        url: Object.values(resp_items)[0].url,\n        loaded: true\n      });\n    });\n  }, []); // SELECTED TEMPLATES\n\n  const selectedTemplate = e => {\n    var index = e.target.selectedIndex;\n    const selection_id = e.target.value;\n    setSelectID({\n      id: selection_id,\n      loaded: true\n    });\n    fetch(`http://localhost:5000/template/${selection_id}`, {\n      method: \"GET\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"x-access-token\": Cookies.get(\"token\")\n      }\n    }).then(response => response.json()).then(resp_items => {\n      setMessage({\n        title: e.target[index].text,\n        message: Object.values(resp_items)[0].Message,\n        url: Object.values(resp_items)[0].url,\n        loaded: true\n      });\n    });\n  }; // Deleting selection\n\n\n  const deleteSelected = () => {\n    setDeleteOnClick(!deleteOnClick); // fetch(`http://localhost:5000/delete-messages/${selection_id}`,{\n  }; //Sending messages\n\n\n  const sendingmessages = () => {\n    const send_contacts = [];\n    const send_names = [];\n    const send_img = `http://localhost:5000/images/${selectID.id}`;\n    const send_msg = message.message;\n    const send_url = message.url;\n    const listOfContacts = contacts[0].contacts.items;\n    listOfContacts.map(obj => {\n      send_contacts.push(obj.number);\n      send_names.push(obj.name);\n    });\n    console.log(send_contacts);\n    fetch(`http://localhost:5000/send-messages`, {\n      method: 'POST',\n      mode: 'cors',\n      body: JSON.stringify({\n        api_numbers: send_contacts,\n        api_names: send_names,\n        api_msg: send_msg,\n        api_url: send_url\n      }),\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"x-access-token\": Cookies.get(\"token\")\n      }\n    });\n  }; //  Render load conditions\n\n\n  var {\n    loaded\n  } = messageItem;\n\n  if (!loaded) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 5\n      }, this)\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"app-bg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"pagetitle\",\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Template\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 31\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"page_greeting messageIconsParentContainer\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"View Templates\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 4\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              style: {\n                width: '18px',\n                height: '18px',\n                marginLeft: '40px',\n                marginTop: '10px'\n              },\n              onClick: deleteSelected,\n              src: Delete,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 5\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              style: {\n                width: '18px',\n                height: '18px',\n                marginLeft: '10px',\n                marginTop: '10px'\n              },\n              onClick: updateOnClick,\n              src: Update,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 5\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              style: {\n                width: '18px',\n                height: '18px',\n                marginLeft: '10px',\n                marginTop: '10px'\n              },\n              onClick: sendingmessages,\n              src: Send,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 5\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 4\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"selectId\",\n          onChange: selectedTemplate,\n          children: messageItem.items.map(obj => /*#__PURE__*/_jsxDEV(\"option\", {\n            style: {\n              color: \"#6B6B6B\",\n              display: \"flex\",\n              flexDirection: \"column\"\n            },\n            name: obj.title,\n            value: obj.id,\n            children: obj.title\n          }, obj.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 8\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cardHolder\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message_card\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image_holder\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"displayImg\",\n                src: selectID.loaded ? `http://localhost:5000/images/${selectID.id}` : `http://localhost:5000/images/4`,\n                alt: \"content_image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  textAlign: \"left\",\n                  paddingLeft: \"20px\",\n                  paddingRight: \"20px\",\n                  marginBottom: \"2px\"\n                },\n                children: message.loaded ? message.message : \"No message found\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  textAlign: \"left\",\n                  paddingLeft: \"20px\",\n                  paddingRight: \"20px\",\n                  color: \"blue\",\n                  textDecoration: \"underline\",\n                  marginTop: \"1px\"\n                },\n                children: message.loaded ? message.url : \"No url found\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: deleteOnClick ? {\n            visibility: \"visible\"\n          } : {\n            visibility: \"hidden\"\n          },\n          children: /*#__PURE__*/_jsxDEV(DeleteMessageComponent, {\n            selected: selectID.id,\n            cond: deleteOnClick\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: showUpdate ? updateStyle : updateStyleNone,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: exOnClick,\n            style: closeBtn,\n            children: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(UpdateMessages, {\n            id: selectID.id,\n            title: message.title,\n            message: message.message,\n            url: message.url\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"msgBtn\",\n          children: /*#__PURE__*/_jsxDEV(CreateMsgbutton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 5\n      }, this)\n    }, void 0, false);\n  }\n};\n\n_s(Message, \"Vu6Yl4uGzdn6piNFanKn/95dP8k=\");\n\n_c = Message;\nexport default Message;\n\nvar _c;\n\n$RefreshReg$(_c, \"Message\");","map":{"version":3,"sources":["/Users/devorii/Desktop/smsmarket/oriisms/src/pages/Message.js"],"names":["React","useEffect","useState","Ref","useRef","useContext","Footer","Cookies","CreateMsgbutton","DeleteMessageComponent","UpdateMessages","ContactContext","Message","props","contacts","messageItem","setMessageItem","items","loaded","updateStyle","setUpdateStyle","width","display","justifyContent","updateStyleNone","setUpdateStyleNone","selected","setSelected","selectID","setSelectID","id","message","setMessage","title","url","deleteOnClick","setDeleteOnClick","closeBtn","SetCloseBtn","top","right","position","backgroundColor","border","borderRadius","padding","fontSize","color","showUpdate","setShowUpdate","exOnClick","updateOnClick","storedTitle","fetch","method","mode","headers","get","then","resp","json","Object","values","response","resp_items","selectedTemplate","e","index","target","selectedIndex","selection_id","value","text","deleteSelected","sendingmessages","send_contacts","send_names","send_img","send_msg","send_url","listOfContacts","map","obj","push","number","name","console","log","body","JSON","stringify","api_numbers","api_names","api_msg","api_url","height","marginLeft","marginTop","Delete","Update","Send","flexDirection","textAlign","paddingLeft","paddingRight","marginBottom","textDecoration","visibility"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, Ref, useRef, useContext } from \"react\";\nimport Footer from \"../components/Footer\";\nimport Cookies from \"js-cookie\";\nimport CreateMsgbutton from \"../components/Createmsgbutton\";\nimport DeleteMessageComponent from \"../components/DeleteMessageComponent\";\nimport UpdateMessages from \"../components/UpdateMessages\";\nimport { ContactContext } from \"../context/ContactsCtxt\"\nimport Create from '../assets/messageIcons/create.svg'\nimport Delete from '../assets/messageIcons/delete.svg'\nimport Update from '../assets/messageIcons/update.svg'\nimport Send from '../assets/messageIcons/send.svg'\n\nconst Message = (props) => {\n\tconst {contacts} = useContext(ContactContext)\n\n\n\tconst [messageItem, setMessageItem] = useState({\n\t\titems: null,\n\t\tloaded: false,\n\t});\n\tconst [updateStyle, setUpdateStyle] = useState({\n\t\twidth: \"100%\",\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t});\n\tconst [updateStyleNone, setUpdateStyleNone] = useState({\n\t\twidth: \"100%\",\n\t\tdisplay: \"none\",\n\t\tjustifyContent: \"center\",\n\t});\n\tconst [selected, setSelected] = useState(props.selected);\n\tconst [selectID, setSelectID] = useState({\n\t\tid: 0,\n\t\tloaded: false,\n\t});\n\tconst [message, setMessage] = useState({\n\t\ttitle: \"\",\n\t\tmessage: \"\",\n\t\turl: \"\",\n\t\tloaded: false,\n\t});\n\tconst [deleteOnClick, setDeleteOnClick] = useState(false);\n\n\tconst [closeBtn, SetCloseBtn] = useState({\n\t\ttop: \"0\",\n\t\tright: \"0\",\n\t\tposition: \"fixed\",\n\t\tbackgroundColor: \"#34A1AD\",\n\t\twidth: '45px',\n\t\tborder: \"none\",\n\t\tborderRadius: '100px',\n\t\tpadding: \"10px\",\n\t\tfontSize: \"20px\",\n\t\tcolor: \"white\",\n\t});\n\tconst [showUpdate, setShowUpdate] = useState(false);\n\n\tconst exOnClick = () => setShowUpdate(!showUpdate);\n\tconst updateOnClick = () => setShowUpdate(true);\n\n\tuseEffect(() => {\n\t\tvar storedTitle;\n\n\t\tfetch(\"http://localhost:5000/onload-messages\", {\n\t\t\tmethod: \"GET\",\n\t\t\tmode: \"cors\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\"x-access-token\": Cookies.get(\"token\"),\n\t\t\t},\n\t\t})\n\t\t\t.then((resp) => resp.json())\n\t\t\t.then((items) => {\n\t\t\t\tsetMessageItem({ items: Object.values(items), loaded: true });\n\t\t\t\t// Call another fetch to return an obj\n\t\t\t\tsetSelectID({ id: Object.values(items)[0].id, loaded: true });\n\t\t\t\tstoredTitle = Object.values(items)[0].title;\n\n\t\t\t\treturn fetch(\n\t\t\t\t\t`http://localhost:5000/template/${Object.values(items)[0].id}`,\n\t\t\t\t\t{\n\t\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\t\tmode: \"cors\",\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\t\t\t\"x-access-token\": Cookies.get(\"token\"),\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t})\n\t\t\t.then((response) => response.json())\n\t\t\t.then((resp_items) => {\n\t\t\t\tsetMessage({\n\t\t\t\t\ttitle: storedTitle,\n\t\t\t\t\tmessage: Object.values(resp_items)[0].Message,\n\t\t\t\t\turl: Object.values(resp_items)[0].url,\n\t\t\t\t\tloaded: true,\n\t\t\t\t});\n\t\t\t});\n\t}, []);\n\n\t// SELECTED TEMPLATES\n\tconst selectedTemplate = (e) => {\n\t\tvar index = e.target.selectedIndex;\n\t\tconst selection_id = e.target.value;\n\n\t\tsetSelectID({ id: selection_id, loaded: true });\n\n\t\tfetch(`http://localhost:5000/template/${selection_id}`, {\n\t\t\tmethod: \"GET\",\n\t\t\tmode: \"cors\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\"x-access-token\": Cookies.get(\"token\"),\n\t\t\t},\n\t\t})\n\t\t\t.then((response) => response.json())\n\t\t\t.then((resp_items) => {\n\t\t\t\tsetMessage({\n\t\t\t\t\ttitle: e.target[index].text,\n\t\t\t\t\tmessage: Object.values(resp_items)[0].Message,\n\t\t\t\t\turl: Object.values(resp_items)[0].url,\n\t\t\t\t\tloaded: true,\n\t\t\t\t});\n\t\t\t});\n\t};\n\n\t// Deleting selection\n\tconst deleteSelected = () => {\n\t\tsetDeleteOnClick(!deleteOnClick);\n\t\t// fetch(`http://localhost:5000/delete-messages/${selection_id}`,{\n\t};\n\n\t//Sending messages\n\tconst sendingmessages = () => {\n\t\tconst send_contacts = []\n\t\tconst send_names = []\n\t\tconst send_img = `http://localhost:5000/images/${selectID.id}`\n\t\tconst send_msg = message.message\n\t\tconst send_url = message.url\n\n\t\tconst listOfContacts = contacts[0].contacts.items\n\t\tlistOfContacts.map((obj)=>{\n\t\t\tsend_contacts.push(obj.number)\n\t\t\tsend_names.push(obj.name)\n\t\t})\n\n\t\tconsole.log(send_contacts)\n\t\tfetch(`http://localhost:5000/send-messages`, {\n\t\t\tmethod: 'POST',\n\t\t\tmode: 'cors',\n\t\t\tbody: JSON.stringify({\n\t\t\t\tapi_numbers: send_contacts,\n\t\t\t\tapi_names: send_names,\n\t\t\t\tapi_msg: send_msg,\n\t\t\t\tapi_url: send_url\n\n\t\t\t}),\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\"x-access-token\": Cookies.get(\"token\"),\n\t\t\t}\n\n\n\t\t})\n\t}\n\t//  Render load conditions\n\tvar { loaded } = messageItem;\n\n\tif (!loaded) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<p>Loading...</p>\n\t\t\t</>\n\t\t);\n\t} else {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className='app-bg'>\n\n\t\t\t\t<h4 className='pagetitle'><b>Template</b></h4>\n\n\t\t\t<div className='page_greeting messageIconsParentContainer'>\n\t\t\t<h2>View Templates</h2>\n\t\t\t<div>\n\t\t\t\t<img style={{width: '18px', height: '18px', marginLeft: '40px', marginTop: '10px'}} onClick={deleteSelected} src={Delete} alt=''></img>\n\t\t\t\t<img style={{width: '18px', height: '18px', marginLeft: '10px', marginTop: '10px'}} onClick={updateOnClick} src={Update} alt=''></img>\n\t\t\t\t<img style={{width: '18px', height: '18px', marginLeft: '10px', marginTop: '10px'}} onClick={sendingmessages} src={Send} alt=''></img>\n\n\t\t\t</div>\n\n\t\t\t</div>\n\t\t\t<select id='selectId' onChange={selectedTemplate}>\n\t\t\t\t\t\t{messageItem.items.map((obj) => (\n\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tcolor: \"#6B6B6B\",\n\t\t\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\t\t\tflexDirection: \"column\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tkey={obj.id}\n\t\t\t\t\t\t\t\tname={obj.title}\n\t\t\t\t\t\t\t\tvalue={obj.id}>\n\t\t\t\t\t\t\t\t{obj.title}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</select>\n\n\t\t\t\t\t<div className='cardHolder'>\n\t\t\t\t\t\t<div className='message_card'>\n\t\t\t\t\t\t\t<div className='image_holder'>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tclassName='displayImg'\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tselectID.loaded\n\t\t\t\t\t\t\t\t\t\t\t? `http://localhost:5000/images/${selectID.id}`\n\t\t\t\t\t\t\t\t\t\t\t: `http://localhost:5000/images/4`\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt='content_image'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\ttextAlign: \"left\",\n\t\t\t\t\t\t\t\t\t\tpaddingLeft: \"20px\",\n\t\t\t\t\t\t\t\t\t\tpaddingRight: \"20px\",\n\t\t\t\t\t\t\t\t\t\tmarginBottom: \"2px\",\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t{message.loaded ? message.message : \"No message found\"}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\ttextAlign: \"left\",\n\t\t\t\t\t\t\t\t\t\tpaddingLeft: \"20px\",\n\t\t\t\t\t\t\t\t\t\tpaddingRight: \"20px\",\n\t\t\t\t\t\t\t\t\t\tcolor: \"blue\",\n\t\t\t\t\t\t\t\t\t\ttextDecoration: \"underline\",\n\t\t\t\t\t\t\t\t\t\tmarginTop: \"1px\",\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t{message.loaded ? message.url : \"No url found\"}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\n\t\t\t\t\t{/* Delete message component */}\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\tdeleteOnClick\n\t\t\t\t\t\t\t\t? { visibility: \"visible\" }\n\t\t\t\t\t\t\t\t: { visibility: \"hidden\" }\n\t\t\t\t\t\t}>\n\t\t\t\t\t\t<DeleteMessageComponent\n\t\t\t\t\t\t\tselected={selectID.id}\n\t\t\t\t\t\t\tcond={deleteOnClick}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div style={showUpdate ? updateStyle : updateStyleNone}>\n\t\t\t\t\t\t<button onClick={exOnClick} style={closeBtn}>\n\t\t\t\t\t\t\tX\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<UpdateMessages\n\t\t\t\t\t\t\tid={selectID.id}\n\t\t\t\t\t\t\ttitle={message.title}\n\t\t\t\t\t\t\tmessage={message.message}\n\t\t\t\t\t\t\turl={message.url}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className='msgBtn'>\n\t\t\t\t\t\t<CreateMsgbutton />\n\t\t\t\t\t</div>\n\t\t\t\t\t<Footer />\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n};\n\nexport default Message;\n"]},"metadata":{},"sourceType":"module"}